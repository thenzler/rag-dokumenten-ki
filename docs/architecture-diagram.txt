```
+-------------------+     +-------------------+
|                   |     |                   |
|     End User      +---->+    Next.js UI     |
|                   |     |  (Cloud Run)      |
+-------------------+     +---------+---------+
                                    |
                                    | HTTP API Calls
                                    v
                           +---------+---------+
                           |                   |
                           |    FastAPI API    |
                           |   (Cloud Run)     |
                           +---------+---------+
                                    |                  +----------------------+
                                    | Query +--------->+                      |
      Document Upload                |                  |    Vertex AI LLM    |
      +------------------------+     |                  |    (Gemini Pro)     |
      |                        |     v                  |                      |
+-----v------+         +-------+-------+               +----------------------+
|            |         |               +-------+
|   Cloud    |         |  Vertex AI    |       |
|  Storage   +-------->+  Vector Search+<------+
|            |         |               |       |
+-----+------+         +-------+-------+       |
      |                        |               |
      | Trigger               |               |
      v                       |               |
+-----+------+                | Get Chunks    | Store Vectors
|            |                v               |
|   Cloud    |         +-------+-------+      |
|  Function  +-------->+               +------+
|            |         |   PostgreSQL  |
+-----+------+         |   Cloud SQL   |
      |                |               |
      | PDF Processing +---------------+
      v
+-----+------+
|            |
| Document AI|
|            |
+------------+
```